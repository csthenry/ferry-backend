(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6260e53b"],{1203:function(t,e,a){},"1eed":function(t,e,a){"use strict";a("7db6")},"3f2c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-editor-container"},[a("el-row",{attrs:{gutter:12}},[a("el-col",{style:{marginBottom:"12px"},attrs:{sm:24,xs:24,md:6,xl:6,lg:6}},[a("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"工单总数",total:t.dashboardValue.count.all},nativeOn:{click:function(e){return t.toTicketList("/process/all")}}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline"})])],1)],1),t._v(" "),a("el-col",{style:{marginBottom:"12px"},attrs:{sm:24,xs:24,md:6,xl:6,lg:6}},[a("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我创建的",total:t.dashboardValue.count.my_create},nativeOn:{click:function(e){return t.toTicketList("/process/my-create")}}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline"})])],1)],1),t._v(" "),a("el-col",{style:{marginBottom:"12px"},attrs:{sm:24,xs:24,md:6,xl:6,lg:6}},[a("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我相关的",total:t.dashboardValue.count.related},nativeOn:{click:function(e){return t.toTicketList("/process/related")}}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline"})])],1)],1),t._v(" "),a("el-col",{style:{marginBottom:"12px"},attrs:{sm:24,xs:24,md:6,xl:6,lg:6}},[a("chart-card",{staticStyle:{cursor:"pointer"},attrs:{title:"我的待办",total:t.dashboardValue.count.upcoming},nativeOn:{click:function(e){return t.toTicketList("/process/upcoming")}}},[a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"指标说明",placement:"top-start"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline"})])],1)],1)],1),t._v(" "),a("el-card",{style:{marginBottom:"12px",textAlign:"center"},attrs:{bordered:!1,"body-style":{padding:"5"}}},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},on:{change:t.timeScreening},model:{value:t.querys,callback:function(e){t.querys=e},expression:"querys"}})],1),t._v(" "),a("el-card",{style:{marginBottom:"12px"},attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard"},[a("div",[a("h4",{staticStyle:{"margin-left":"20px"},style:{marginBottom:"20px"}},[t._v("提交工单统计")]),t._v(" "),a("RangeSubmit",{attrs:{"statistics-data":t.dashboardValue.submit}})],1)])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard leaderboard"},[a("rank-list",{attrs:{title:"热门流程排行榜 Top 10",list:t.dashboardValue.ranks}})],1)])],1),t._v(" "),a("el-col",{staticStyle:{"padding-left":"12px"},attrs:{span:8}},[a("el-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard leaderboard"},[a("HandleRank",{attrs:{title:"处理工单人员排行榜",list:t.dashboardValue.handle}})],1)])],1),t._v(" "),a("el-col",{staticStyle:{"padding-left":"12px"},attrs:{span:8}},[a("el-card",{attrs:{bordered:!1,"body-style":{padding:"0"}}},[a("div",{staticClass:"salesCard leaderboard"},[a("HandlePeriod",{attrs:{title:"工单处理耗时排行榜",list:t.dashboardValue.period}})],1)])],1)],1)],1)},s=[],n=a("90c0"),r=a("8548"),l=a("e8ba"),o=a("ea29"),c=a("b602"),d=a("b775");function u(t){return Object(d["a"])({url:"/api/v1/dashboard",method:"get",params:t})}var p={name:"DashboardAdmin",components:{ChartCard:n["default"],RankList:r["default"],RangeSubmit:l["default"],HandleRank:o["default"],HandlePeriod:c["default"]},data:function(){return{dashboardValue:{count:{}},rankList:[],submitData:[],querys:"",queryList:{},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},created:function(){this.getInitData()},methods:{getInitData:function(){var t=this;u(this.queryList).then((function(e){t.dashboardValue=e.data}))},timeScreening:function(){this.querys.length>1&&(this.queryList.start_time=this.querys[0],this.queryList.end_time=this.querys[1],this.getInitData())},toTicketList:function(t){this.$router.push({path:t})}}},f=p,h=(a("49a6"),a("2877")),m=Object(h["a"])(f,i,s,!1,null,"181d3802",null);e["default"]=m.exports},"49a6":function(t,e,a){"use strict";a("84bb")},6935:function(t,e,a){},"6a3b":function(t,e,a){"use strict";a("6935")},7431:function(t,e,a){"use strict";a("1203")},"7db6":function(t,e,a){},"84bb":function(t,e,a){},8548:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("h4",{staticClass:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"最常被提交的流程排行及提交的次数。",placement:"top-end"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),t._v(" "),a("ul",{staticClass:"list"},t._l(t.list,(function(e,i){return a("li",{key:i},[a("span",{class:i<3?"active":null},[t._v(t._s(i+1))]),t._v(" "),a("span",[t._v(t._s(e.name))]),t._v(" "),a("span",[t._v(t._s(e.total))])])})),0)])},s=[],n={name:"RankList",props:{title:{type:String,default:""},list:{type:Array,default:null}}},r=n,l=(a("d641"),a("2877")),o=Object(l["a"])(r,i,s,!1,null,"3f8eafd7",null);e["default"]=o.exports},8802:function(t,e,a){},"90c0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{attrs:{loading:t.loading,"body-style":{padding:"20px 24px 8px"},bordered:!1}},[a("div",{staticClass:"chart-card-header"},[a("div",{staticClass:"meta"},[a("span",{staticClass:"chart-card-title"},[t._t("title",(function(){return[t._v("\n          "+t._s(t.title)+"\n        ")]}))],2),t._v(" "),a("span",{staticClass:"chart-card-action"},[t._t("action")],2)]),t._v(" "),a("div",{staticClass:"total"},[t._t("total",(function(){return[a("span",[t._v(t._s("function"===typeof t.total&&t.total()||t.total))])]}))],2)]),t._v(" "),a("div",{staticClass:"chart-card-footer"},[a("div",{staticClass:"field"},[t._t("footer")],2)])])},s=[],n=(a("c5f6"),{name:"ChartCard",props:{title:{type:String,default:""},total:{type:[Function,Number,String],required:!1,default:null},loading:{type:Boolean,default:!1}}}),r=n,l=(a("6a3b"),a("2877")),o=Object(l["a"])(r,i,s,!1,null,"553f4ef8",null);e["default"]=o.exports},9406:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a(t.currentRole,{tag:"component"})],1)},s=[],n=a("3f2c"),r={name:"Dashboard",components:{adminDashboard:n["default"]},data:function(){return{currentRole:"adminDashboard"}},created:function(){}},l=r,o=a("2877"),c=Object(o["a"])(l,i,s,!1,null,null,null);e["default"]=c.exports},a7dc:function(t,e,a){"use strict";a.r(e);var i=a("ed08");e["default"]={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(i["b"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}},b602:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("h4",{staticClass:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"工单的处理耗时，注意：仅统计处理节点，审批节点暂未统计。",placement:"top-end"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),t._v(" "),a("ul",{staticClass:"list"},t._l(t.list,(function(e,i){return a("li",{key:i},[a("span",{class:i<3?"active":null},[t._v(t._s(i+1))]),t._v(" "),a("span",[t._v(t._s(e.nickname)+" ("+t._s(e.username)+")")]),t._v(" "),a("span",[t._v("\n        "+t._s(e.cost_duration>60?Number((e.cost_duration/60).toString().match(/^\d+(?:\.\d{0,2})?/))+" 分":e.cost_duration+" 秒")+"\n      ")])])})),0)])},s=[],n={name:"HandlePeriod",props:{title:{type:String,default:""},list:{type:Array,default:null}}},r=n,l=(a("7431"),a("2877")),o=Object(l["a"])(r,i,s,!1,null,"5d7ae3b6",null);e["default"]=o.exports},d641:function(t,e,a){"use strict";a("8802")},e8ba:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,staticStyle:{padding:"0 25px 20px 20px"},style:{height:t.height,width:t.width}})},s=[],n=a("313e"),r=a.n(n),l=a("a7dc"),o={mixins:[l["default"]],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},autoResize:{type:Boolean,default:!0},statisticsData:{type:Object,default:function(){return{}},required:!0}},data:function(){return{chart:null}},watch:{statisticsData:{deep:!0,handler:function(t){this.setOptions(t)}}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=r.a.init(this.$el,"macarons"),this.setOptions(this.statisticsData)},setOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.expectedData,t.actualData;this.chart.setOption({title:{textStyle:{fontSize:15}},tooltip:{trigger:"axis"},legend:{data:["工单总数","未结束","已结束"]},grid:{left:"25",right:"35",bottom:"20",top:"50",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.statisticsData.datetime},yAxis:{type:"value"},series:[{name:"工单总数",type:"line",data:this.statisticsData.total},{name:"未结束",type:"line",data:this.statisticsData.processing},{name:"已结束",type:"line",data:this.statisticsData.overs}]})}}},c=o,d=a("2877"),u=Object(d["a"])(c,i,s,!1,null,null,null);e["default"]=u.exports},ea29:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rank"},[a("h4",{staticClass:"title"},[t._v("\n    "+t._s(t.title)+"\n    "),a("el-tooltip",{staticClass:"item",attrs:{slot:"action",effect:"dark",content:"按照工单处理节点进行统计，一个工单可能会有多个处理节点。",placement:"top-end"},slot:"action"},[a("i",{staticClass:"el-icon-warning-outline",staticStyle:{float:"right"}})])],1),t._v(" "),a("ul",{staticClass:"list"},t._l(t.list,(function(e,i){return a("li",{key:i},[a("span",{class:i<3?"active":null},[t._v(t._s(i+1))]),t._v(" "),a("span",[t._v(t._s(e.nickname)+" ("+t._s(e.username)+")")]),t._v(" "),a("span",[t._v(t._s(e.count))])])})),0)])},s=[],n={name:"HandleRank",props:{title:{type:String,default:""},list:{type:Array,default:null}}},r=n,l=(a("1eed"),a("2877")),o=Object(l["a"])(r,i,s,!1,null,"36f1541f",null);e["default"]=o.exports}}]);